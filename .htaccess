# Redirige toutes les requêtes vers le dossier public/
# Ce fichier est nécessaire si le document root pointe vers la racine du projet
# et non vers le dossier public/

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Définir la base pour les sous-dossiers (à adapter selon votre installation)
    # En local à la racine: /
    # En sous-dossier Plesk: /nom-du-sous-dossier/
    RewriteBase /
    
    # Redirige vers le dossier public si la requête ne pointe pas déjà dessus
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/$1 [L,QSA]
</IfModule>

# Protège les fichiers sensibles
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Empêche l'accès aux fichiers de configuration
<FilesMatch "\.(env|json|md|sql)$">
    Order allow,deny
    Deny from all
</FilesMatch>
